{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixibay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["export { fetchSearch };\nimport axios from 'axios';\nconst API = '43312748-d2770da7ff63c643db495a6a3';\n\nconst fetchSearch = async (imageName, page) => {\n  try {\n    const result = await axios.get(`https://pixabay.com/api/`, {\n      params: {\n        key: API,\n        q: imageName,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        per_page: 15,\n      },\n    });\n    return result.data;\n  } catch (error) {\n    console.log(error);\n  }\n};\n","export { initalRender, renderGallery };\n\nconst initalRender = () => {\n  const form = document.createElement('form');\n  form.classList.add('search-form');\n  const input = document.createElement('input');\n  input.type = 'text';\n  input.classList.add('search-input');\n  input.placeholder = 'Search images...';\n  const button = document.createElement('button');\n  button.type = 'submit';\n  button.classList.add('search-button');\n  button.textContent = 'Search';\n  const nextButton = document.createElement('button');\n  nextButton.textContent = 'Load more';\n  nextButton.classList.add('search-button');\n  nextButton.classList.add('next-button');\n  nextButton.classList.add('is-hidden');\n  nextButton.type = 'button';\n  const list = document.createElement('ul');\n  list.classList.add('gallery-list');\n  form.append(input, button);\n  document.body.prepend(form, list, nextButton);\n};\n\nconst renderGallery = imagesGallery => {\n  const result = imagesGallery.map(img => {\n    const item = document.createElement('li');\n    item.classList.add('gallery-item');\n\n    const link = document.createElement('a');\n    link.classList.add('gallery-link');\n    link.href = img.largeImageURL;\n\n    const image = document.createElement('img');\n    image.classList.add('gallery-image');\n    image.src = img.webformatURL;\n    image.alt = img.tags;\n    image.width = '360';\n\n    const descItems = {\n      Likes: img.likes,\n      Views: img.views,\n      Comments: img.comments,\n      Downloads: img.downloads,\n    };\n\n    const descList = document.createElement('ul');\n    descList.classList.add('gallery-desc-list');\n    for (let item in descItems) {\n      const descItem = document.createElement('li');\n      descItem.classList.add('gallery-desc-item');\n\n      const descTtl = document.createElement('p');\n      descTtl.classList.add('gallery-desc-ttl');\n      descTtl.textContent = item;\n\n      const descText = document.createElement('p');\n      descText.classList.add('gallery-desc-text');\n      descText.textContent = descItems[item];\n\n      descItem.append(descTtl, descText);\n      descList.append(descItem);\n    }\n\n    link.append(image);\n    item.append(link, descList);\n    return item;\n  });\n  return result;\n};\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { fetchSearch } from './js/pixibay-api';\nimport { initalRender, renderGallery } from './js/render-functions';\n\ninitalRender();\nconst form = document.querySelector('.search-form');\nconst input = document.querySelector('.search-input');\nconst list = document.querySelector('.gallery-list');\nconst loader = document.querySelector('.loader');\nconst nextButton = document.querySelector('.next-button');\nconst scrollBtn = document.querySelector('.scrollbutton');\nlet globalImageName;\nlet globalTotalHits;\nlet page;\n\nform.addEventListener('submit', async event => {\n  try {\n    scrollBtn.classList.remove('is-open');\n    list.innerHTML = '';\n    nextButton.classList.add('is-hidden');\n    page = 1;\n    event.preventDefault();\n    globalImageName = input.value.trim();\n    event.target.reset();\n    if (globalImageName === '') {\n      iziToast.show({\n        title: 'Error',\n        message: 'Invalid search request value',\n        backgroundColor: 'red',\n        theme: 'dark',\n        color: 'red',\n        position: 'topRight',\n      });\n      return;\n    }\n    loader.classList.add('is-loading');\n\n    const { hits, totalHits } = await fetchSearch(globalImageName, page);\n    globalTotalHits = totalHits;\n\n    if (hits.length === 0) {\n      iziToast.show({\n        title: 'Error',\n        message: 'Unfortunately no pictures found by your request :(',\n        backgroundColor: 'red',\n        theme: 'dark',\n        color: 'red',\n        position: 'topRight',\n      });\n      loader.classList.remove('is-loading');\n      return;\n    }\n\n    const gallery = renderGallery(hits);\n    list.append(...gallery);\n\n    loader.classList.remove('is-loading');\n    if (globalTotalHits / 15 > 1) {\n      nextButton.classList.remove('is-hidden');\n      nextButton.addEventListener('click', onClickNextButton);\n    }\n    const lightbox = new SimpleLightbox('.gallery-link', {\n      captionDelay: 250,\n      captionsData: 'alt',\n    });\n    lightbox.refresh();\n  } catch (error) {\n    console.log(error);\n  }\n});\n\nconst onClickNextButton = async event => {\n  try {\n    nextButton.classList.add('is-hidden');\n    loader.classList.add('is-loading');\n    page += 1;\n    const { hits } = await fetchSearch(globalImageName, page);\n    const gallery = renderGallery(hits);\n    list.append(...gallery);\n    if (page < Math.ceil(globalTotalHits / 15)) {\n      nextButton.classList.remove('is-hidden');\n    }\n    loader.classList.remove('is-loading');\n    const lightbox = new SimpleLightbox('.gallery-link', {\n      captionDelay: 250,\n      captionsData: 'alt',\n    });\n    lightbox.refresh();\n    const item = document.querySelector('li');\n    const height = item.getBoundingClientRect().height;\n    console.log(height);\n    window.scrollBy({\n      top: height * 2,\n      behavior: 'smooth',\n    });\n    if (page === Math.ceil(globalTotalHits / 15)) {\n      nextButton.removeEventListener('click', onClickNextButton);\n      iziToast.info({\n        title: 'Unfortunately',\n        message: 'All pictures are shown already.',\n      });\n      scrollBtn.classList.add('is-open');\n    }\n  } catch (error) {\n    console.log(error);\n  }\n};\n\nlist.addEventListener('click', event => {\n  event.preventDefault();\n});\n"],"names":["API","fetchSearch","imageName","page","axios","error","initalRender","form","input","button","nextButton","list","renderGallery","imagesGallery","img","item","link","image","descItems","descList","descItem","descTtl","descText","loader","scrollBtn","globalImageName","globalTotalHits","event","iziToast","hits","totalHits","gallery","onClickNextButton","SimpleLightbox","height"],"mappings":"owBAEA,MAAMA,EAAM,qCAENC,EAAc,MAAOC,EAAWC,IAAS,CAC7C,GAAI,CAWF,OAVe,MAAMC,EAAM,IAAI,2BAA4B,CACzD,OAAQ,CACN,IAAKJ,EACL,EAAGE,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAU,EACX,CACP,CAAK,GACa,IACf,OAAQG,EAAO,CACd,QAAQ,IAAIA,CAAK,CAClB,CACH,EClBMC,EAAe,IAAM,CACzB,MAAMC,EAAO,SAAS,cAAc,MAAM,EAC1CA,EAAK,UAAU,IAAI,aAAa,EAChC,MAAMC,EAAQ,SAAS,cAAc,OAAO,EAC5CA,EAAM,KAAO,OACbA,EAAM,UAAU,IAAI,cAAc,EAClCA,EAAM,YAAc,mBACpB,MAAMC,EAAS,SAAS,cAAc,QAAQ,EAC9CA,EAAO,KAAO,SACdA,EAAO,UAAU,IAAI,eAAe,EACpCA,EAAO,YAAc,SACrB,MAAMC,EAAa,SAAS,cAAc,QAAQ,EAClDA,EAAW,YAAc,YACzBA,EAAW,UAAU,IAAI,eAAe,EACxCA,EAAW,UAAU,IAAI,aAAa,EACtCA,EAAW,UAAU,IAAI,WAAW,EACpCA,EAAW,KAAO,SAClB,MAAMC,EAAO,SAAS,cAAc,IAAI,EACxCA,EAAK,UAAU,IAAI,cAAc,EACjCJ,EAAK,OAAOC,EAAOC,CAAM,EACzB,SAAS,KAAK,QAAQF,EAAMI,EAAMD,CAAU,CAC9C,EAEME,EAAgBC,GACLA,EAAc,IAAIC,GAAO,CACtC,MAAMC,EAAO,SAAS,cAAc,IAAI,EACxCA,EAAK,UAAU,IAAI,cAAc,EAEjC,MAAMC,EAAO,SAAS,cAAc,GAAG,EACvCA,EAAK,UAAU,IAAI,cAAc,EACjCA,EAAK,KAAOF,EAAI,cAEhB,MAAMG,EAAQ,SAAS,cAAc,KAAK,EAC1CA,EAAM,UAAU,IAAI,eAAe,EACnCA,EAAM,IAAMH,EAAI,aAChBG,EAAM,IAAMH,EAAI,KAChBG,EAAM,MAAQ,MAEd,MAAMC,EAAY,CAChB,MAAOJ,EAAI,MACX,MAAOA,EAAI,MACX,SAAUA,EAAI,SACd,UAAWA,EAAI,SACrB,EAEUK,EAAW,SAAS,cAAc,IAAI,EAC5CA,EAAS,UAAU,IAAI,mBAAmB,EAC1C,QAASJ,KAAQG,EAAW,CAC1B,MAAME,EAAW,SAAS,cAAc,IAAI,EAC5CA,EAAS,UAAU,IAAI,mBAAmB,EAE1C,MAAMC,EAAU,SAAS,cAAc,GAAG,EAC1CA,EAAQ,UAAU,IAAI,kBAAkB,EACxCA,EAAQ,YAAcN,EAEtB,MAAMO,EAAW,SAAS,cAAc,GAAG,EAC3CA,EAAS,UAAU,IAAI,mBAAmB,EAC1CA,EAAS,YAAcJ,EAAUH,CAAI,EAErCK,EAAS,OAAOC,EAASC,CAAQ,EACjCH,EAAS,OAAOC,CAAQ,CACzB,CAED,OAAAJ,EAAK,OAAOC,CAAK,EACjBF,EAAK,OAAOC,EAAMG,CAAQ,EACnBJ,CACX,CAAG,EC7DHT,IACA,MAAMC,EAAO,SAAS,cAAc,cAAc,EAC5CC,EAAQ,SAAS,cAAc,eAAe,EAC9CG,EAAO,SAAS,cAAc,eAAe,EAC7CY,EAAS,SAAS,cAAc,SAAS,EACzCb,EAAa,SAAS,cAAc,cAAc,EAClDc,EAAY,SAAS,cAAc,eAAe,EACxD,IAAIC,EACAC,EACAvB,EAEJI,EAAK,iBAAiB,SAAU,MAAMoB,GAAS,CAC7C,GAAI,CAQF,GAPAH,EAAU,UAAU,OAAO,SAAS,EACpCb,EAAK,UAAY,GACjBD,EAAW,UAAU,IAAI,WAAW,EACpCP,EAAO,EACPwB,EAAM,eAAc,EACpBF,EAAkBjB,EAAM,MAAM,OAC9BmB,EAAM,OAAO,QACTF,IAAoB,GAAI,CAC1BG,EAAS,KAAK,CACZ,MAAO,QACP,QAAS,+BACT,gBAAiB,MACjB,MAAO,OACP,MAAO,MACP,SAAU,UAClB,CAAO,EACD,MACD,CACDL,EAAO,UAAU,IAAI,YAAY,EAEjC,KAAM,CAAE,KAAAM,EAAM,UAAAC,CAAW,EAAG,MAAM7B,EAAYwB,EAAiBtB,CAAI,EAGnE,GAFAuB,EAAkBI,EAEdD,EAAK,SAAW,EAAG,CACrBD,EAAS,KAAK,CACZ,MAAO,QACP,QAAS,qDACT,gBAAiB,MACjB,MAAO,OACP,MAAO,MACP,SAAU,UAClB,CAAO,EACDL,EAAO,UAAU,OAAO,YAAY,EACpC,MACD,CAED,MAAMQ,EAAUnB,EAAciB,CAAI,EAClClB,EAAK,OAAO,GAAGoB,CAAO,EAEtBR,EAAO,UAAU,OAAO,YAAY,EAChCG,EAAkB,GAAK,IACzBhB,EAAW,UAAU,OAAO,WAAW,EACvCA,EAAW,iBAAiB,QAASsB,CAAiB,GAEvC,IAAIC,EAAe,gBAAiB,CACnD,aAAc,IACd,aAAc,KACpB,CAAK,EACQ,QAAO,CACjB,OAAQ5B,EAAO,CACd,QAAQ,IAAIA,CAAK,CAClB,CACH,CAAC,EAED,MAAM2B,EAAoB,MAAML,GAAS,CACvC,GAAI,CACFjB,EAAW,UAAU,IAAI,WAAW,EACpCa,EAAO,UAAU,IAAI,YAAY,EACjCpB,GAAQ,EACR,KAAM,CAAE,KAAA0B,CAAI,EAAK,MAAM5B,EAAYwB,EAAiBtB,CAAI,EAClD4B,EAAUnB,EAAciB,CAAI,EAClClB,EAAK,OAAO,GAAGoB,CAAO,EAClB5B,EAAO,KAAK,KAAKuB,EAAkB,EAAE,GACvChB,EAAW,UAAU,OAAO,WAAW,EAEzCa,EAAO,UAAU,OAAO,YAAY,EACnB,IAAIU,EAAe,gBAAiB,CACnD,aAAc,IACd,aAAc,KACpB,CAAK,EACQ,QAAO,EAEhB,MAAMC,EADO,SAAS,cAAc,IAAI,EACpB,sBAAqB,EAAG,OAC5C,QAAQ,IAAIA,CAAM,EAClB,OAAO,SAAS,CACd,IAAKA,EAAS,EACd,SAAU,QAChB,CAAK,EACG/B,IAAS,KAAK,KAAKuB,EAAkB,EAAE,IACzChB,EAAW,oBAAoB,QAASsB,CAAiB,EACzDJ,EAAS,KAAK,CACZ,MAAO,gBACP,QAAS,iCACjB,CAAO,EACDJ,EAAU,UAAU,IAAI,SAAS,EAEpC,OAAQnB,EAAO,CACd,QAAQ,IAAIA,CAAK,CAClB,CACH,EAEAM,EAAK,iBAAiB,QAASgB,GAAS,CACtCA,EAAM,eAAc,CACtB,CAAC"}